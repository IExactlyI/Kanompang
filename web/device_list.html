<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>::Kanom Pang::</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <style>
    body
    {
      padding-top: 200px;
      background-color: rgb(249,249,249);  
    }

    .navbar-brand,
    .navbar-nav li a {
        line-height: 75px;
        height: 75px;
        padding-top: 0;
        font-size: 24px;
    }

    #container {
      height: 100%;
    }

    #row0 {
      padding-top: 40px;
      padding-bottom: 40px;
    }

    #row1 {
      padding-top: 40px;
      padding-bottom: 40px;
    }

    #device0 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    #device1 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    #device2 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    #device3 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    #device4 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    #device5 {
      width: 140px;
      height: 160px;
      padding: 20px;
      cursor: pointer;
    }

    .mycaption {
      padding: 10px;
    }
    
    </style>
    
  </head>
  <body>

    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="images/dw_logo.png" height="150px" style="margin-right: 10px"></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="#">List</a></li>
            <li class=""><a href="#">Monitor</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
          </ul>
        </div>
      </div>
    </div>

    <div class="panel panel-default col-sm-10 col-sm-offset-1" id="container">
      <div class="row" id="row0">
        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device0" href="device_inner.html">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption0">Caption0</a>
          </center>
        </div>

        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device1">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption1">Caption1</a>
          </center>
        </div>

        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device2">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption2">Caption2</a>
          </center>
        </div>
      </div>

      <div class="row" id="row1">
        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device3">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption3">Caption3</a>
          </center>
        </div>

        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device4">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption4">Caption4</a>
          </center>
        </div>

        <div class="panel panel-default col-sm-4 col-sm-offset-2" id="device5">
          <img id="imgIcon" src="" width="100px"></img>
          <center>
            <a class="mycaption" id="caption5">Caption5</a>
          </center>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/highcharts/highcharts.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script language="javascript">

      var env_icon_url = "images/env_icon.png";
      var soil_icon_url = "images/soil_icon.png";

      /**
       *
       *    This part is script for make <div> of deviceX is clickable
       *
       */
      $("#device0").click(function(){
           window.location=$("#device0").attr("href"); 
           return false;
      });

      $("#device1").click(function(){
           window.location=$("#device1").attr("href"); 
           return false;
      });

      $("#device2").click(function(){
           window.location=$("#device2").attr("href"); 
           return false;
      });

      $("#device3").click(function(){
           window.location=$("#device3").attr("href"); 
           return false;
      });

      $("#device4").click(function(){
           window.location=$("#device4").attr("href"); 
           return false;
      });

      $("#device5").click(function(){
           window.location=$("#device5").attr("href"); 
           return false;
      });

      var websock = new WebSocket("ws://<your_server_ip>:8888/dwlogger");
      var adc0 = 0

      websock.onopen = function () {
        
      }

      websock.onmessage = function (evt) {
        var json_out = jQuery.parseJSON(evt.data);

        console.log(evt.data);

        if (json_out[0]) {
          $("#device0").attr("href", "device_inner.php?id=" + json_out[0][0])
          $('#device0').show(200);
          $('#caption0').text(json_out[0][2]);
          if (json_out[0][1] == 1) {
            $('#device0 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[0][1] == 2) {
            $('#device0 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device0").attr("href", "")
          $('#device0').hide(200);
          $('#caption0').text("");
        }
        
        if (json_out[1]) {
          $("#device1").attr("href", "device_inner.php?id=" + json_out[1][0])
          $('#device1').show(200);
          $('#caption1').text(json_out[1][2]);
          if (json_out[1][1] == 1) {
            $('#device1 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[1][1] == 2) {
            $('#device1 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device1").attr("href", "")
          $('#device1').hide(200);
          $('#caption1').text("");
        }

        if (json_out[2]) {
          $("#device2").attr("href", "device_inner.php?id=" + json_out[2][0])
          $('#device2').show(200);
          $('#caption2').text(json_out[2][2]);
          if (json_out[2][1] == 1) {
            $('#device2 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[2][1] == 2) {
            $('#device2 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device2").attr("href", "")
          $('#device2').hide(200);
          $('#caption2').text("");
        }

        if (json_out[3]) {
          $("#device3").attr("href", "device_inner.php?id=" + json_out[3][0])
          $('#device3').show(200);
          $('#caption3').text(json_out[3][2]);
          if (json_out[3][1] == 1) {
            $('#device3 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[3][1] == 2) {
            $('#device3 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device3").attr("href", "")
          $('#device3').hide(200);
          $('#caption3').text("");
        }

        if (json_out[4]) {
          $("#device4").attr("href", "device_inner.php?id=" + json_out[4][0])
          $('#device4').show(200);
          $('#caption4').text(json_out[4][2]);
          if (json_out[4][1] == 1) {
            $('#device4 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[4][1] == 2) {
            $('#device4 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device4").attr("href", "")
          $('#device4').hide(200);
          $('#caption4').text("");
        }

        if (json_out[5]) {
          $("#device5").attr("href", "device_inner.php?id=" + json_out[5][0])
          $('#device5').show(200);
          $('#caption5').text(json_out[5][2]);
          if (json_out[5][1] == 1) {
            $('#device5 #imgIcon').attr('src',env_icon_url);
          }
          if (json_out[5][1] == 2) {
            $('#device5 #imgIcon').attr('src',soil_icon_url);
          }
        } else {
          $("#device5").attr("href", "")
          $('#device5').hide(200);
          $('#caption5').text("");
        }
      }

      websock.onclose = function () {

      }

      $(function () {
        $(document).ready(function () {
          $('#device0').hide();
          $('#device1').hide();
          $('#device2').hide();
          $('#device3').hide();
          $('#device4').hide();
          $('#device5').hide();
        });
      });

    </script>
  </body>
</html>